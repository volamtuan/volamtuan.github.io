<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Công cụ Lọc Xử lý Text Online</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  
  <!-- Custom Styles -->
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f4f4f4;
    }

    h2 {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background-color: #fff;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    textarea {
      width: 100%;
      padding: 10px;
      font-size: 1em;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-bottom: 20px;
    }

    button {
      padding: 10px;
      font-size: 1.1em;
      background-color: #28a745;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #218838;
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      background-color: #e9ecef;
      border-radius: 8px;
      font-size: 1.1em;
    }

    .nav-link.active {
      background-color: #28a745;
      color: white !important;
    }

    .countdown {
      margin-top: 10px;
      font-size: 1.2em;
      color: #555;
      text-align: center;
      display: none;
    }
  </style>
</head>
<body>
  <div class="text-container">
    <h2 class="text-center">Công cụ Xử lý Text và Lấy Mã 2FA</h2>

    <!-- Navigation Tabs -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="cut-tab" data-toggle="tab" href="#cut" role="tab" aria-controls="cut" aria-selected="true">Cắt Chuỗi</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="remove-duplicates-tab" data-toggle="tab" href="#remove-duplicates" role="tab" aria-controls="remove-duplicates" aria-selected="false">Lọc Trùng</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="merge-tab" data-toggle="tab" href="#merge" role="tab" aria-controls="merge" aria-selected="false">Ghép File</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="filter-tab" data-toggle="tab" href="#filter" role="tab" aria-controls="filter" aria-selected="false">Lọc Chuỗi Text</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="totp-tab" data-toggle="tab" href="#totp" role="tab" aria-controls="totp" aria-selected="false">Lấy Mã 2FA</a>
      </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content" id="myTabContent">
      <!-- Tab: Cắt Chuỗi -->
      <div class="tab-pane fade show active" id="cut" role="tabpanel" aria-labelledby="cut-tab">
        <form>
          <textarea id="cutInput" rows="5" class="form-control" placeholder="Nhập nội dung cần cắt..."></textarea>
          <input type="text" id="delimiter" class="form-control mt-3" placeholder="Ký tự ngăn cách (VD: |)" />
          <input type="number" id="start" class="form-control mt-3" placeholder="Vị trí bắt đầu (VD: 1)" />
          <input type="number" id="end" class="form-control mt-3" placeholder="Vị trí kết thúc (VD: 2)" />
          <button type="button" class="btn btn-warning mt-3" onclick="cutString()">Cắt Chuỗi</button>
          <textarea id="cutResult" rows="5" class="form-control result mt-3" readonly></textarea>
        </form>
      </div>

      <!-- Tab: Lọc Trùng -->
      <div class="tab-pane fade" id="remove-duplicates" role="tabpanel" aria-labelledby="remove-duplicates-tab">
        <form>
          <textarea id="filterInput" rows="5" class="form-control" placeholder="Nhập nội dung cần lọc trùng..."></textarea>
          <button type="button" class="btn btn-warning mt-3" onclick="removeDuplicates()">Lọc Trùng</button>
          <textarea id="filterResult" rows="5" class="form-control result mt-3" readonly></textarea>
        </form>
      </div>

      <!-- Tab: Ghép File -->
      <div class="tab-pane fade" id="merge" role="tabpanel" aria-labelledby="merge-tab">
        <form>
          <textarea id="mergeInput1" rows="5" class="form-control" placeholder="Nội dung 1"></textarea>
          <textarea id="mergeInput2" rows="5" class="form-control mt-3" placeholder="Nội dung 2"></textarea>
          <input type="text" id="mergeDelimiter" class="form-control mt-3" placeholder="Ký tự ngăn cách (VD: |)" />
          <button type="button" class="btn btn-warning mt-3" onclick="mergeFiles()">Ghép File</button>
          <textarea id="mergeResult" rows="5" class="form-control result mt-3" readonly></textarea>
        </form>
      </div>

      <!-- Tab: Lọc Chuỗi -->
      <div class="tab-pane fade" id="filter" role="tabpanel" aria-labelledby="filter-tab">
        <form>
          <textarea id="inputText" rows="5" class="form-control" placeholder="Nhập nội dung cần lọc..."></textarea>
          <textarea id="filterWords" rows="3" class="form-control mt-3" placeholder="Nhập từ khóa (ngăn cách bằng dấu phẩy)"></textarea>
          <button type="button" class="btn btn-success mt-3" onclick="filterContains()">Lọc Chứa</button>
          <button type="button" class="btn btn-danger mt-3" onclick="filterNotContains()">Lọc Không Chứa</button>
          <textarea id="outputText" rows="5" class="form-control result mt-3" readonly></textarea>
        </form>
      </div>

      <!-- Tab: Lấy Mã 2FA -->
      <div class="tab-pane fade" id="totp" role="tabpanel" aria-labelledby="totp-tab">
        <form>
          <textarea id="secret-key" rows="3" class="form-control" placeholder="Nhập Key 2FA"></textarea>
          <p id="auth-code" class="auth-code mt-3"></p>
          <button type="button" class="btn btn-danger mt-3" onclick="clearInput()">Xóa</button>
        </form>
      </div>
    </div>
  </div>

  <!-- JavaScript Libraries -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jsSHA/2.4.2/sha.js"></script>

  <!-- Custom Scripts -->
  <script>
    // Cắt Chuỗi
    function cutString() {
      const input = document.getElementById("cutInput").value.split("\n");
      const delimiter = document.getElementById("delimiter").value;
      const start = parseInt(document.getElementById("start").value) - 1;
      const end = parseInt(document.getElementById("end").value);

      const result = input
        .map(line => line.split(delimiter).slice(start, end).join(delimiter))
        .join("\n");

      document.getElementById("cutResult").value = result;
      navigator.clipboard.writeText(result);
    }

    // Lọc Trùng
    function removeDuplicates() {
      const input = document.getElementById("filterInput").value.split("\n");
      const uniqueLines = [...new Set(input)];
      const result = uniqueLines.join("\n");
      document.getElementById("filterResult").value = result;
      navigator.clipboard.writeText(result);
    }

    // Ghép Files
    function mergeFiles() {
      const input1 = document.getElementById("mergeInput1").value.split("\n");
      const input2 = document.getElementById("mergeInput2").value.split("\n");
      const delimiter = document.getElementById("mergeDelimiter").value;

      const result = input1.map((line, i) => line + delimiter + (input2[i] || "")).join("\n");
      document.getElementById("mergeResult").value = result;
      navigator.clipboard.writeText(result);
    }

    // Lọc Chứa
    function filterContains() {
      const input = document.getElementById("inputText").value.split("\n");
      const keywords = document.getElementById("filterWords").value.split(",");
      const result = input.filter(line => keywords.some(word => line.includes(word))).join("\n");
      document.getElementById("outputText").value = result;
      navigator.clipboard.writeText(result);
    }

    // Lọc Không Chứa
    function filterNotContains() {
      const input = document.getElementById("inputText").value.split("\n");
      const keywords = document.getElementById("filterWords").value.split(",");
      const result = input.filter(line => !keywords.some(word => line.includes(word))).join("\n");
      document.getElementById("outputText").value = result;
      navigator.clipboard.writeText(result);
    }
  </script>
</body>
</html>
